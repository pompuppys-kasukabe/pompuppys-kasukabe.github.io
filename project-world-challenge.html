<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>World Challenge Project｜POM PUPPYS bright</title>
  <meta name="description" content="POM PUPPYS bright の挑戦を応援する特設ページ。活動報告・進捗・支援のご案内。" />

  <meta property="og:type" content="article" />
  <meta property="og:site_name" content="POM PUPPYS bright" />
  <meta property="og:title" content="World Challenge Project｜POM PUPPYS bright" />
  <meta property="og:description" content="活動報告・進捗・支援のご案内。" />
  <meta property="og:url" content="" />
  <meta property="og:image" content="./assets/ogp.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:locale" content="ja_JP" />
  <meta name="twitter:card" content="summary_large_image" />

  <link rel="stylesheet" href="./style.css?v=20251213-1" />
  <script src="./config.js?v=20251213-1"></script>
</head>

<body>
  <header class="header">
    <div class="container header__inner">
      <div class="brand">
        <span class="brand__dot"></span>
        <span>World Challenge Project</span>
      </div>
      <nav class="nav">
        <a href="./index.html">← 公式サイトへ</a>
      </nav>
    </div>
  </header>

  <main class="section">
    <div class="container">
      <div class="heroCard">
        <h1 class="heroTitle" style="margin-bottom:6px;">World Challenge Project</h1>
        <p class="heroSub muted" style="margin-bottom:0;">
          POM PUPPYS bright の挑戦を支える特設ページです。<br/>
          進捗は設定値から自動計算して表示します。
        </p>
      </div>

      <div style="height:14px;"></div>

      <div class="progressCard" id="progressCard">
        <div class="progressRow">
          <div class="muted">目標</div>
          <div class="kpi" id="goalYen">—</div>
          <div class="muted">現在</div>
          <div class="kpi" id="raisedYen">—</div>
          <div class="muted">達成率</div>
          <div class="kpi" id="pct">—</div>
          <div class="muted">残り日数</div>
          <div class="kpi" id="daysLeft">—</div>
        </div>

        <div class="bar" aria-label="progress">
          <div id="barFill"></div>
        </div>

        <div class="muted" style="margin-top:10px;font-size:.92rem;">
          更新日：<span id="updatedAt">—</span>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;">
          <a id="crowdfundingBtn" class="btn btn-primary" href="#" target="_blank" rel="noopener noreferrer" style="display:none;">
            支援ページへ
          </a>
          <a class="btn btn-ghost" href="./index.html#media">取材の方へ（Media）</a>
        </div>
      </div>

      <div style="height:14px;"></div>

      <div class="card">
        <h2 style="margin:0 0 10px;color:var(--navy);font-size:1.15rem;">お知らせ</h2>
        <p class="muted" style="margin:0;line-height:1.8;">
          支援情報はこの特設ページに集約し、公式サイトはチーム紹介をメインにしています。<br/>
          （クラウドファンディングが“前に出すぎない”設計）
        </p>
      </div>
    </div>
  </main>

  <script>
    function yen(n){
      try{ return new Intl.NumberFormat("ja-JP").format(n) + " 円"; }
      catch(e){ return String(n) + " 円"; }
    }
    function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }
    function daysBetween(today, end){
      const ms = end.getTime() - today.getTime();
      return Math.ceil(ms / (1000*60*60*24));
    }

    (function(){
      const cfg = window.PUPPYS_CONFIG?.project;
      if(!cfg) return;

      const goal = Number(cfg.goalYen || 0);
      const raised = Number(cfg.raisedYen || 0);
      const pct = goal > 0 ? (raised / goal) * 100 : 0;

      const today = new Date();
      const end = new Date(String(cfg.endDate || ""));
      const daysLeft = isFinite(end.getTime()) ? daysBetween(today, end) : NaN;

      document.getElementById("goalYen").textContent = yen(goal);
      document.getElementById("raisedYen").textContent = yen(raised);
      document.getElementById("pct").textContent = Math.round(pct) + "%";
      document.getElementById("daysLeft").textContent = isNaN(daysLeft) ? "—" : (daysLeft < 0 ? "終了" : daysLeft + "日");
      document.getElementById("updatedAt").textContent = cfg.updatedAt || "—";

      const fill = document.getElementById("barFill");
      fill.style.width = clamp(pct, 0, 100).toFixed(1) + "%";

      const cUrl = cfg.crowdfundingUrl || "";
      const cBtn = document.getElementById("crowdfundingBtn");
      if(cUrl){
        cBtn.href = cUrl;
        cBtn.style.display = "inline-flex";
      }
    })();
  </script>
</body>
</html>
